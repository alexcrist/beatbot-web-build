{"version":3,"sources":["src/features/Library/LibraryEmpty.js","src/features/Library/LibraryRecordingVisual.js","src/features/Library/LibraryRecording.js","src/features/Library/Library.js"],"names":["Container","styled","View","STANDARD_MARGIN","NAV_BAR_HEIGHT","Message","Text","COLORS","DARK","TITLE_FONT","LARGE_FONT_SIZE","ButtonContainer","Button","PrimaryButton","LibraryEmpty","WaveVisual","isAnimating","animationDuration","lineColors","LIBRARY_EMPTY_WAVE_VISUAL_COLORS","text","onPress","navigate","SMALL_MARGIN","Dots","props","width","LIBRARY_VISUAL_DOT_SIZE","Dot","color","AnimatedDot","Animated","createAnimatedComponent","updateDotColors","colors","beatStart","beatEnd","numDots","classification","volumeLength","colorIndex","HIGHLIGHTS","length","dotStartIndex","Math","ceil","dotEndIndex","floor","max","i","React","memo","beatStarts","beatEnds","classifications","duration","isPlaying","useState","dimensions","setDimensions","animatedHeights","useRef","current","useMemo","dotColors","dotsWidth","LIBRARY_VISUAL_DOT_MARGIN","slice","push","Value","LIGHT","useEffect","startAnimation","stopAnimation","animation","setAnimation","msPerDot","animations","sequence","toValue","filter","item","map","timing","useNativeDriver","ANIMATION_USE_NATIVE_DRIVER","easing","Easing","linear","parallel","start","stop","onLayout","event","nativeEvent","layout","height","index","style","TouchableOpacity","Row","TextContainer","Title","STANDARD_FONT_SIZE","Details","FONT","PlayButton","LIBRARY_PLAY_BUTTON_SIZE","LibraryRecording","recording","storageId","name","createdEpoch","inputAudio","rate","channels","data","beatbotData","volume","sound","makeSound","dispatch","useDispatch","setIsPlaying","playTimeout","setPlayTimeout","setIsProcessing","selectRecordingById","formatSeconds","round","formatDate","load","clearTimeout","play","timeout","setTimeout","FontAwesome5","BACKGROUND","size","LIBRARY_PLAY_ICON_SIZE","solid","LibraryList","FlatList","LibraryRecordingContainer","Divider","Spacer","Library","recordings","useSelector","state","_","isDeleted","sortBy","value","keyExtractor","renderItem"],"mappings":"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","file":"static/js/5.8fa3baff.chunk.js","sourcesContent":["import styled from 'styled-components/native';\nimport { PrimaryButton } from '../../components/Button';\nimport WaveVisual from '../../components/WaveVisual';\nimport { COLORS, LARGE_FONT_SIZE, LIBRARY_EMPTY_WAVE_VISUAL_COLORS, NAV_BAR_HEIGHT, RECORD_WAVE_VISUAL_COLORS, STANDARD_MARGIN, TITLE_FONT } from '../../constants';\nimport { navigate } from '../../util/navigate';\n\nconst Container = styled.View`\n  align-items: center;\n  flex: 1;\n  width: 100%;\n  margin-bottom: ${3 * STANDARD_MARGIN + NAV_BAR_HEIGHT}px;\n  justify-content: space-between;\n`;\n\nconst Message = styled.Text`\n  color: ${COLORS.DARK};\n  text-align: center;\n  font-family: ${TITLE_FONT};\n  font-size: ${LARGE_FONT_SIZE}px;\n`;\n\nconst ButtonContainer = styled.View`\n  padding-horizontal: ${STANDARD_MARGIN}px;\n  width: 100%;\n  align-items: center;\n`;\n\nconst Button = styled(PrimaryButton)`\n`;\n\nconst LibraryEmpty = () => {\n  const onPress = () => {\n    navigate('Record');\n  };\n  return (\n    <Container>\n      <Message>\n        Your library is empty\n      </Message>\n      <WaveVisual isAnimating animationDuration={15000} lineColors={LIBRARY_EMPTY_WAVE_VISUAL_COLORS} />\n      <ButtonContainer>\n        <Button\n          text='Make a recording' \n          onPress={onPress}\n        />\n      </ButtonContainer>\n    </Container>\n  );\n};\n\nexport default LibraryEmpty;","import React, { useState, useEffect, useMemo, useRef } from 'react';\nimport styled from 'styled-components/native';\nimport { ANIMATION_USE_NATIVE_DRIVER, COLORS, LIBRARY_VISUAL_DOT_MARGIN, LIBRARY_VISUAL_DOT_SIZE, SMALL_MARGIN } from '../../constants';\nimport { Animated, Easing } from 'react-native';\n\nconst Container = styled.View`\n  width: 100%;\n  justify-content: center;\n  margin-top: ${SMALL_MARGIN}px;\n`;\n\nconst Dots = styled.View`\n  width: ${props => props.width}px;\n  justify-content: space-around;\n  flex-direction: row;\n  align-items: center;\n  height: ${LIBRARY_VISUAL_DOT_SIZE * 3}px;\n`;\n\nconst Dot = styled.View`\n  width: ${LIBRARY_VISUAL_DOT_SIZE}px;\n  height: ${LIBRARY_VISUAL_DOT_SIZE}px;\n  border-radius: ${LIBRARY_VISUAL_DOT_SIZE / 2}px;\n  background-color: ${props => props.color};\n`;\n\nconst AnimatedDot = Animated.createAnimatedComponent(Dot);\n\nconst updateDotColors = (colors, beatStart, beatEnd, numDots, classification, volumeLength) => {\n  const colorIndex = classification % COLORS.HIGHLIGHTS.length;\n  const color = COLORS.HIGHLIGHTS[colorIndex];\n  const dotStartIndex = Math.ceil(beatStart / (volumeLength - 1) * (numDots - 1));\n  let dotEndIndex = Math.floor(beatEnd / (volumeLength - 1) * (numDots - 1));\n  dotEndIndex = Math.max(dotEndIndex, dotStartIndex);\n  for (let i = dotStartIndex; i <= dotEndIndex; i++) {\n    colors[i] = color;\n  }\n};\n\nconst LibraryRecordingVisual = ({\n  beatStarts,\n  beatEnds,\n  classifications,\n  volumeLength,\n  duration,\n  isPlaying,\n}) => {\n\n  const [dimensions, setDimensions] = useState(null);\n  const onLayout = (event) => {\n    const { width, height } = event.nativeEvent.layout;\n    setDimensions({ width, height });\n  };\n\n  const animatedHeights = useRef([]).current;\n\n  const { dotColors, dotsWidth, numDots } = useMemo(() => {\n    if (!dimensions) {\n      return { dotColors: [], dotsWidth: '100%', numDots: 0 };\n    }\n    \n    const numDots = Math.floor((dimensions.width - LIBRARY_VISUAL_DOT_MARGIN) / (LIBRARY_VISUAL_DOT_SIZE + LIBRARY_VISUAL_DOT_MARGIN));\n    const dotsWidth = numDots * LIBRARY_VISUAL_DOT_SIZE + (numDots + 1) * LIBRARY_VISUAL_DOT_MARGIN;\n   \n    animatedHeights.slice(0, animatedHeights.length);\n    for (let i = 0; i < numDots; i++) {\n      animatedHeights.push(new Animated.Value(LIBRARY_VISUAL_DOT_SIZE));\n    }\n\n    const dotColors = [];\n    for (let i = 0; i < numDots; i++) {\n      dotColors.push(COLORS.LIGHT);\n    }\n    for (let i = 0; i < beatStarts.length; i++) {\n      updateDotColors(dotColors, beatStarts[i], beatEnds[i], numDots, classifications[i], volumeLength);\n    }\n    \n    return { dotColors, dotsWidth, numDots };\n  }, [dimensions, beatStarts, beatEnds, classifications, volumeLength]);\n\n  useEffect(() => {\n    if (isPlaying) {\n      startAnimation();\n    } else {\n      stopAnimation();\n    }\n  }, [isPlaying]);\n\n  const [animation, setAnimation] = useState(null);\n\n  const startAnimation = () => {\n    const msPerDot = duration / numDots * 1000;\n    const animations = [];\n    for (let i = 0; i < numDots; i++) {\n      const sequence = [{\n        toValue: LIBRARY_VISUAL_DOT_SIZE,\n        duration: i * msPerDot\n      }, {\n        toValue: LIBRARY_VISUAL_DOT_SIZE * 3,\n        duration: 2 * msPerDot\n      }, {\n        toValue: LIBRARY_VISUAL_DOT_SIZE,\n        duration: 2 * msPerDot \n      }]\n        .filter((item) => item.duration > 0)\n        .map((item) => Animated.timing(animatedHeights[i], {\n          ...item,\n          useNativeDriver: ANIMATION_USE_NATIVE_DRIVER,\n          easing: Easing.linear\n        }));\n      animations.push(Animated.sequence(sequence));\n    }\n    const animation = Animated.parallel(animations);\n    animation.start();\n    setAnimation(animation);\n  };\n\n  const stopAnimation = () => {\n    if (animation) {\n      animation.stop();\n      const animations = [];\n      for (let i = 0; i < numDots; i++) {\n        animations.push(Animated.timing(animatedHeights[i], {\n          toValue: LIBRARY_VISUAL_DOT_SIZE,\n          duration: 0,\n          useNativeDriver: ANIMATION_USE_NATIVE_DRIVER\n        }));\n      }\n      Animated.parallel(animations).start();\n    }\n  };\n\n  return (\n    <Container onLayout={onLayout}>\n      <Dots width={dotsWidth}>\n        {dotColors.map((color, index) => (\n          <AnimatedDot\n            key={`dot-${index}`}\n            color={color}\n            style={{ height: animatedHeights[index] }}\n          />\n        ))}\n      </Dots>\n    </Container>\n  );\n};\n\nexport default React.memo(LibraryRecordingVisual);","import { FontAwesome5 } from '@expo/vector-icons';\nimport { useMemo, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport styled from 'styled-components/native';\nimport { makeSound } from '../../audio/player/player.web';\nimport { COLORS, FONT, LIBRARY_PLAY_BUTTON_SIZE, LIBRARY_PLAY_ICON_SIZE, SMALL_MARGIN, STANDARD_FONT_SIZE, STANDARD_MARGIN, TITLE_FONT } from '../../constants';\nimport { setIsProcessing } from '../../redux/recordingsSlice';\nimport { navigate } from '../../util/navigate';\nimport { selectRecordingById } from '../../recordings/recordingEditor';\nimport { formatDate, formatSeconds } from '../../util/stringFormatter';\nimport LibraryRecordingVisual from './LibraryRecordingVisual';\n\nconst Container = styled.TouchableOpacity`\n  width: 100%;\n`;\n\nconst Row = styled.View`\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nconst TextContainer = styled.View`\n  flex: 1;\n  align-items: flex-start;\n`;\n\nconst Title = styled.Text`\n  color: ${COLORS.DARK};\n  font-size: ${STANDARD_FONT_SIZE}px;\n  font-family: ${TITLE_FONT};\n  line-height: ${STANDARD_FONT_SIZE}px;\n  margin-bottom: ${SMALL_MARGIN}px;\n`;\n\nconst Details = styled.Text`\n  color: ${COLORS.DARK};\n  font-size: ${STANDARD_FONT_SIZE}px;\n  font-family: ${FONT};\n  line-height: ${STANDARD_FONT_SIZE}px;\n`;\n\nconst PlayButton = styled.TouchableOpacity`\n  width: ${LIBRARY_PLAY_BUTTON_SIZE}px;\n  height: ${LIBRARY_PLAY_BUTTON_SIZE}px;\n  border-radius: ${LIBRARY_PLAY_BUTTON_SIZE / 2}px;\n  background-color: ${props => props.isPlaying ? COLORS.DARK : COLORS.LIGHT};\n  align-items: center;\n  justify-content: center;\n`;\n\nconst LibraryRecording = ({ recording }) => {\n\n  const {\n    storageId,\n    name,\n    createdEpoch,\n    inputAudio: {\n      rate,\n      channels,\n      data,\n      duration,\n    },\n    beatbotData: {\n      volume,\n      beatStarts,\n      beatEnds,\n      classifications,\n    }\n  } = recording;\n\n  const sound = useMemo(() => {\n    return makeSound(data, rate, channels);\n  }, [recording]);\n\n  const dispatch = useDispatch();\n\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [playTimeout, setPlayTimeout] = useState(null);\n\n  const onPressContainer = () => {\n    dispatch(setIsProcessing(true));\n    navigate('Editor');\n    selectRecordingById(storageId);\n    dispatch(setIsProcessing(false));\n  };\n\n  const onPressPlay = () => {\n    if (isPlaying) {\n      sound.load();\n      clearTimeout(playTimeout);\n      setIsPlaying(false);\n    } else {\n      sound.play();\n      const timeout = setTimeout(() => setIsPlaying(false), duration * 1000);\n      setPlayTimeout(timeout);\n      setIsPlaying(true);\n    }\n  };\n\n  return (\n    <Container onPress={onPressContainer}>\n      <Row>\n        <TextContainer>\n          <Title>\n            {name}\n          </Title>\n          <Details>\n            {formatSeconds(Math.round(duration))}\n            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n            {formatDate(createdEpoch)}\n          </Details>\n        </TextContainer>\n        <PlayButton \n          onPress={onPressPlay}\n          isPlaying={isPlaying}  \n        >\n          <FontAwesome5\n            color={isPlaying ? COLORS.BACKGROUND : COLORS.DARK}\n            size={LIBRARY_PLAY_ICON_SIZE}\n            name={isPlaying ? 'stop' : 'play'}\n            solid\n          />\n        </PlayButton>\n      </Row>\n      <Row>\n        <LibraryRecordingVisual\n          beatStarts={beatStarts}\n          beatEnds={beatEnds}\n          classifications={classifications}\n          volumeLength={volume.length}\n          duration={duration}\n          isPlaying={isPlaying}\n        />\n      </Row>\n    </Container>\n  );\n};\n\nexport default LibraryRecording;","import _ from 'lodash';\nimport { useSelector } from 'react-redux';\nimport styled from 'styled-components/native';\nimport { COLORS, NAV_BAR_HEIGHT, STANDARD_MARGIN } from '../../constants';\nimport LibraryEmpty from './LibraryEmpty';\nimport LibraryRecording from './LibraryRecording';\n\nconst Container = styled.View`\n  flex: 1;\n  background-color: ${COLORS.BACKGROUND}; \n  align-items: center;\n`;\n\nconst LibraryList = styled.FlatList`\n  width: 100%;\n  max-width: 900px;\n  padding-horizontal: ${STANDARD_MARGIN}px;\n`;\n\nconst LibraryRecordingContainer = styled.View`\n  width: 100%;\n`;\n\nconst Divider = styled.View`\n  width: 100%;\n  height: 2px;\n  border-radius: 1px;\n  background-color: ${COLORS.LIGHT};\n  margin-vertical: ${STANDARD_MARGIN}px;\n`;\n\nconst Spacer = styled.View`\n  width: 100%;\n  height: ${STANDARD_MARGIN * 2 + NAV_BAR_HEIGHT}px;\n`;\n\nconst Library = () => {\n\n  let recordings = useSelector(state => state.recordings.recordings);\n  recordings = _(recordings)\n    .filter(recording => !recording.isDeleted)\n    .sortBy((recording) => -recording.createdEpoch)\n    .value();\n\n  return (\n    <Container>\n      {recordings.length === 0 ? <LibraryEmpty /> : (\n        <LibraryList\n          data={recordings}\n          keyExtractor={(recording, index) => `${index}${recording.storageId}`}\n          renderItem={(recording) => (\n            <>\n              <LibraryRecordingContainer>\n                <LibraryRecording recording={recording.item} />\n              </LibraryRecordingContainer>\n              {recording.index === recordings.length - 1 ? <Spacer /> : <Divider />}\n            </>\n          )}\n        />\n      )}\n    </Container>\n  );\n};\n\nexport default Library;\n"],"sourceRoot":""}